<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <title>Memory game</title>
  </head>
  <body>
    <div class="main">
      <div class="header">
        <button class="btn" id="start">Start</button>
        <span style="display: flex"
          ><button
            style="
              background-color: transparent;
              border: none;
              color: white;
              font-size: 22px;
              font-weight: bold;
            "
          >
            moves:
          </button>
          <button
            style="
              background-color: transparent;
              border: none;
              color: white;
              font-size: 22px;
              font-weight: bold;
            "
            id="moves"
          >
            0
          </button></span
        >

        <span style="display: flex"
          ><button
            style="
              background-color: transparent;
              border: none;
              color: white;
              font-size: 22px;
              font-weight: bold;
            "
          >
            time:
          </button>
          <button
            style="
              background-color: transparent;
              border: none;
              color: white;
              font-size: 22px;
              font-weight: bold;
            "
            id="time"
          >
            0
          </button></span
        >
      </div>
      <div id="container" class="centerbox">
        <div class="box" id="box1">
          <img
            src="./images/one.jpg"
            class="img"
            id="1"
            alt="memorygame image"
          
          />
        </div>
        <div class="box" id="box2">
          <img
            src="./images/five.jpg"
            class="img"
            id="2"
            alt="memorygame image"
           
          />
        </div>
        <div class="box" id="box3">
          <img
            src="./images/three.jpg"
            class="img"
            id="3"
            alt="memorygame image"
           
          />
        </div>
        <div class="box" id="box4">
          <img
            src="./images/seven.jpg"
            class="img"
            id="4"
            alt="memorygame image"
         
          />
        </div>
        <div class="box" id="box5">
          <img
            src="./images/thirteen.jpg"
            class="img"
            id="5"
            alt="memorygame image"
       
          />
        </div>
        <div class="box" id="box6">
          <img
            src="./images/six.jpg"
            class="img"
            id="6"
            alt="memorygame image"
          
          />
        </div>
        <div class="box" id="box7">
          <img
            src="./images/four.jpg"
            class="img"
            id="7"
            alt="memorygame image"
         
          />
        </div>
        <div class="box" id="box8">
          <img
            src="./images/eight.jpg"
            class="img"
            id="8"
            alt="memorygame image"
        
          />
        </div>
        <div class="box" id="box9">
          <img
            src="./images/nine.jpg"
            class="img"
            id="9"
            alt="memorygame image"
        
          />
        </div>
        <div class="box" id="box10">
          <img
            src="./images/ten.jpg"
            class="img"
            id="10"
            alt="memorygame image"
       
          />
        </div>
        <div class="box" id="box11">
          <img
            src="./images/seven.jpg"
            class="img"
            id="11"
            alt="memorygame image"
          
          />
        </div>
        <div class="box" id="box12">
          <img
            src="./images/twelve.jpg"
            class="img"
            id="12"
            alt="memorygame image"
      
          />
        </div>
        <div class="box" id="box13">
          <img
            src="./images/fourteen.jpg"
            class="img"
            id="13"
            alt="memorygame image"
        
          />
        </div>
        <div class="box" id="box14">
          <img
            src="./images/two.jpg"
            class="img"
            id="14"
            alt="memorygame image"
         
          />
        </div>
        <div class="box" id="box15">
          <img
            src="./images/eleven.jpg"
            class="img"
            id="15"
            alt="memorygame image"
          
          />
        </div>
        <div class="box" id="box16">
          <img
            src="./images/thirteen.jpg"
            class="img"
            id="16"
            alt="memorygame image"
           
          />
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  //to hide all images in onego
  var pair1=0;
  var pair2=0;
  function hideallimages(){
    const images = document.querySelectorAll(".img");
  images.forEach(function (image) {
    image.style.display = "none";
  });
  }
  hideallimages()
  
  var showtime = 5;

  var hideid;

  function startshow() {
    var handler1 = function () {
      if (showtime <= 0) {
        clearInterval(hideid);
        //to hide all images in onego
        const images = document.querySelectorAll(".img");
        images.forEach(function (image) {
          image.style.display = "none";
        });
       
      } else {
        showtime--;
        document.getElementById("time").textContent =showtime;
      }
    };
    hideid = setInterval(handler1, 1000);
    handler1();
  }

  function showimages() {
    //to show all images in onego
    const images = document.querySelectorAll(".img");
    images.forEach(function (image) {
      image.style.display = "block";
    });
  }

  //when user click on start timer starts
  let start = document.getElementById("start");
  var id;
  var time = 64;
  var handler = function () {
    if (time < 0) {
      clearInterval(id);
      start.innerText="..."
  
     
      window.location.reload()
      alert("You loose!");

    } else {
      document.getElementById("time").textContent = time--;
    }
  };

  start.addEventListener("click", () => {
    id = setInterval(handler, 1000);
    handler();
    start.disabled = true;
    start.innerText = "...";
   
    if (showtime >= 0) {
      showimages();
    }
    startshow();
    var count = 0;
 var clickedid1=0;
 var clickedid2=0;

  // Add a click event listener to each box
  var clickedBoxes = [];
  var clickedBoxes1=[]
  console.log(clickedBoxes.length) 
  for (let i = 1; i <= 16; i++) {
    const box = document.getElementById(`box${i}`);
    box.addEventListener("click", () => {
      
      if (!clickedBoxes.includes(i) && clickedBoxes.length < 2) {
        clickedBoxes.push(i);
        showparticularimage(i);
        count++;

        if (clickedBoxes.length === 2) {
          // Check if the two clicked boxes form a pair
          if (checkForPair(clickedBoxes[0], clickedBoxes[1])) {
            // Handle a matched pair (e.g., make the images visible)
            showparticularimage(clickedBoxes[0]);
            showparticularimage(clickedBoxes[1]);
          alert("Great! Search one more Pair")
            for (let i = 1; i <= 16; i++) {
    const box = document.getElementById(`box${i}`);
    box.addEventListener("click", () => {
      
      if (!clickedBoxes1.includes(i) && clickedBoxes1.length < 2) {
        clickedBoxes1.push(i);
        showparticularimage(i);
        count++;

        if (clickedBoxes1.length === 2) {
          // Check if the two clicked boxes form a pair
          if (checkForPair(clickedBoxes1[0], clickedBoxes1[1])) {
            // Handle a matched pair (e.g., make the images visible)
            showparticularimage(clickedBoxes1[0]);
            showparticularimage(clickedBoxes1[1]);
          alert("Great Job!")
          clearInterval(id);
          } else {
            // No match, so hide the boxes again after a delay
            setTimeout(() => {
              hideparticularimage(clickedBoxes1[0]);
              hideparticularimage(clickedBoxes1[1]);
              clickedBoxes1 = [];
            }, 300); 
          }
        }
      }

      document.getElementById("moves").innerText = count;
    });
  }
 
          
          
          
          } else {
            // No match, so hide the boxes again after a delay
            setTimeout(() => {
              hideparticularimage(clickedBoxes[0]);
              hideparticularimage(clickedBoxes[1]);
              clickedBoxes = [];
            }, 300); 
          }
        }
      }

      document.getElementById("moves").innerText = count;
    });
  }

  });  
  
 
  function checkForPair(id1, id2) {
   
     if ((id1 === 4 && id2 === 11) || (id1 === 11 && id2 === 4)) {
      return true;
     }
     if ((id1 === 5 && id2 === 16) || (id1 === 16 && id2 === 5)) {
     return true;
   }
    // Add more conditions as needed
    return false; 
  }

  function showparticularimage(id) {
    document.getElementById(`${id}`).style.display = "block";
  }

  function hideparticularimage(id) {
    document.getElementById(`${id}`).style.display = "none";
  }
 
  if(start.innerText=="Restart"){
  console.log(start.innerText)
  }
  
</script>
